/*!
 * Chart.bands.js
 * Version: v0.4.0-rc
 *
 * Copyright 2016 BBC
 * Released under the MIT license
 * https://github.com/BBC/Chart.bands.js/blob/master/LICENSE.md
 */
!function o(r,e,t){function a(l,i){if(!e[l]){if(!r[l]){var s="function"==typeof require&&require;if(!i&&s)return s(l,!0);if(n)return n(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var f=e[l]={exports:{}};r[l][0].call(f.exports,function(o){var e=r[l][1][o];return a(e?e:o)},f,f.exports,o,r,e,t)}return e[l].exports}for(var n="function"==typeof require&&require,l=0;l<t.length;l++)a(t[l]);return a}({1:[function(o,r,e){},{}],2:[function(o,r,e){function t(o,r,e,t,a){var n=t.left,l=e.getPixelForValue(a.from),i=t.right,s=e.getPixelForValue(a.to);o.beginPath(),o.moveTo(n,l),o.lineTo(n,s),o.lineTo(i,s),o.lineTo(i,l),o.fillStyle=a.backgroundColor,o.fill()}function a(o,r,e,t){var a=r.getPixelForValue(t.yValue),i=t.bandLine;if("dashed"===i.type)for(var s=e.start;s<e.stop;s+=6)n(o,a,s,s+4,i.stroke,i.colour);else n(o,a,e.start,e.stop,i.stroke,i.colour);void 0!==i.label&&i.label.length>0&&l(o,i,{x:e.start,y:e.top-2*t.bandLine.fontSize})}function n(o,r,e,t,a,n){o.beginPath(),o.moveTo(e,r),o.lineTo(t,r),o.lineWidth=a,o.strokeStyle=n,o.stroke()}function l(o,r,e){if(o.font=u.fontString(r.fontSize,r.fontStyle,r.fontFamily),o.fillStyle=r.colour,o.fillText(r.label,e.x,e.y),"dashed"===r.type)for(var t=10;t<e.x-10;t+=6)n(o,e.y+.5*r.fontSize,t,t+4,r.stroke,r.colour);else n(o,e.y,10,e.x-10,r.stroke,r.colour)}function i(o){return"string"==typeof o.color}function s(o,r,e,t,a){for(var n=[],l=0;l<a.length;l++){var s=a[l],c=u.configMerge(f.Bands.defaults.bands,s);if(!i(c))return void console.warn("ConfigError: The Chart.Bands.js config seems incorrect");var d=r.getPixelForValue(s.from),g=r.getPixelForValue(s.to),h=1-d/e,p=1-g/e;n.push({pos:h,colour:c.color}),n.push({pos:p,colour:c.color})}var b,v=!1;try{b=o.createLinearGradient(0,e,0,0);for(var y=0;y<n.length;y++){var C=n[y];b.addColorStop(C.pos,C.colour)}b.addColorStop(1,t)}catch(x){console.warn("ConfigError: Chart.Bands.js had a problem applying one or more colors please check that you have selected valid color strings"),v=!0}return v?t:b}function c(o){return d[o]?void(p=d[o]):(console.warn("Warning: The Chart.Bands.js plugin is not supported with chart type "+o),void(h=!1))}var f,u,d,g,h,p,b;f=o("Chart"),f="function"==typeof f?f:window.Chart,u=f.helpers,h=!0,p="borderColor",baseColor=[],d={bubble:"backgroundColor",line:"borderColor"},g={borderColor:"backgroundColor",backgroundColor:"borderColor"},f.Bands=f.Bands||{},b=f.Bands.defaults={bands:{from:0,to:0,yValue:!1,backgroundColor:"transparent",bandLine:{stroke:.01,colour:"rgba(0, 0, 0, 1.000)",type:"solid",label:"",fontSize:"12",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontStyle:"normal"},color:["rgba(0, 255, 0, 1.000)"]}};var v=f.PluginBase.extend({beforeInit:function(o){c(o.config.type);for(var r=0;r<o.chart.config.data.datasets.length;r++)baseColor[r]=o.chart.config.data.datasets[r][p]},afterScaleUpdate:function(o){var r,e;if(h!==!1){r=o.chart.ctx.canvas;for(var t=0;t<o.chart.config.data.datasets.length;t++)e=s(r.getContext("2d"),o.scales["y-axis-0"],o.chart.height,baseColor[t],o.options.bands),o.chart.config.data.datasets[t][p]=e}},beforeDraw:function(o){var r,e;if(h!==!1){r=o.chart.ctx.canvas;for(var n=o.options.bands.length-1;n>=0;n--){var l=o.options.bands[n];e=u.configMerge(f.Bands.defaults.bands,l),"string"==typeof e.backgroundColor&&t(r.getContext("2d"),o,o.scales["y-axis-0"],o.scales["x-axis-0"],e),"number"==typeof e.yValue?a(r.getContext("2d"),o.scales["y-axis-0"],{top:o.chartArea.top,start:o.chartArea.left,stop:o.chartArea.right},e):console.warn("ConfigError: The Chart.Bands.js plugin config requires a yValue")}}}});f.pluginService.register(new v)},{Chart:1}]},{},[2]);
